"use strict";(self.webpackChunkremote_jobs_frontend=self.webpackChunkremote_jobs_frontend||[]).push([[83],{83:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(2555),s=a(5043),o=a(3216),i=a(5436);const l=new class{constructor(){this.permission="default",this.isSupported=void 0,this.isSupported="Notification"in window,this.isSupported&&(this.permission=Notification.permission)}async requestPermission(){return this.isSupported?("default"===this.permission&&(this.permission=await Notification.requestPermission()),this.permission):"denied"}async showNotification(e){if(await this.requestPermission(),"granted"!==this.permission)return!1;try{const t=new Notification(e.title,{body:e.body,icon:e.icon||"/favicon.ico",tag:e.tag,data:e.data});return setTimeout(()=>{t.close()},5e3),!0}catch(t){return console.error("Error showing notification:",t),!1}}async showJobNotification(e){return this.showNotification({title:"New Job: ".concat(e.title),body:"".concat(e.company," in ").concat(e.location),tag:"job-".concat(e.id),data:{jobId:e.id,type:"job_alert"}})}async showMultipleJobNotifications(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const a=e.slice(0,t);for(const r of a)await this.showJobNotification(r),await new Promise(e=>setTimeout(e,100));e.length>t&&await this.showNotification({title:"".concat(e.length," New Jobs Available"),body:"".concat(t," shown, ").concat(e.length-t," more available"),tag:"job-summary"})}isPermissionGranted(){return"granted"===this.permission}isNotificationSupported(){return this.isSupported}async checkForNewJobs(e){try{const t=new URL("/api/jobs/recent",window.location.origin);e&&t.searchParams.set("since",e);const a=await fetch(t.toString());if(!a.ok)throw new Error("Failed to fetch recent jobs: ".concat(a.statusText));const r=await a.json();return Array.isArray(r)?r:[]}catch(t){return console.error("Error checking for new jobs:",t),[]}}startPeriodicJobCheck(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=(new Date).toISOString();const a=setInterval(async()=>{if(this.isPermissionGranted())try{const e=await this.checkForNewJobs(t);e.length>0&&await this.showMultipleJobNotifications(e),t=(new Date).toISOString()}catch(e){console.error("Error in periodic job check:",e)}else clearInterval(a)},60*e*1e3);window.jobCheckInterval=a}stopPeriodicJobCheck(){window.jobCheckInterval&&(clearInterval(window.jobCheckInterval),delete window.jobCheckInterval)}};var n=a(2362),c=a(579);const d=()=>{const e=(0,o.Zp)(),t=(0,o.zy)(),[a,d]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[h,u]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[y,p]=(0,s.useState)(""),[f,w]=(0,s.useState)([]),[v,j]=(0,s.useState)(null),[k,N]=(0,s.useState)(!1),[S,C]=(0,s.useState)(""),[P,_]=(0,s.useState)([]),[J,I]=(0,s.useState)([]),[L,T]=(0,s.useState)(!1),[F,R]=(0,s.useState)([]),[E,A]=(0,s.useState)(""),[D,Y]=(0,s.useState)([]),[$,M]=(0,s.useState)([]),[U,G]=(0,s.useState)(!1),[q,z]=(0,s.useState)([]),[O,B]=(0,s.useState)(["Remote Jobs"]),[H,X]=(0,s.useState)(!1),[Q,W]=(0,s.useState)(!1),[Z,K]=(0,s.useState)("default"),V=(0,s.useRef)(),ee=(0,s.useRef)(),te=(0,s.useRef)(),ae=[{value:"entry",label:"Entry Level (0-2 years)",minYears:0,maxYears:2},{value:"mid",label:"Mid Level (2-4 years)",minYears:2,maxYears:4},{value:"senior",label:"Senior Level (4-6 years)",minYears:4,maxYears:6},{value:"lead",label:"Lead/Principal (6-10 years)",minYears:6,maxYears:10},{value:"executive",label:"Executive (10+ years)",minYears:10,maxYears:null}];(0,s.useEffect)(()=>{var a;const r=null===(a=t.state)||void 0===a?void 0:a.userId;r?d(r):e("/"),"Notification"in window&&K(Notification.permission)},[t,e]);const re=e=>{p(e),j(null),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{(async e=>{if(e.length<3)w([]);else try{const t=await fetch("https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(e),"&limit=5&addressdetails=1")),a=await t.json();w(a)}catch(h){console.error("Location search error:",h)}})(e)},300)},se=e=>{C(e),T(!0),ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{(async e=>{if(e.length<2)_([]);else try{const t=await(0,n.getApiUrl)(),a=await fetch("".concat(t,"/jobs/job-titles/search?q=").concat(encodeURIComponent(e),"&limit=10"));if(!a.ok)throw new Error("API not available");const r=(await a.json()).map((e,t)=>({id:e.id||"api-".concat(t),title:e.title,category:e.category||"Technology"}));_(r.slice(0,10))}catch(h){console.error("Job titles search error:",h);const a=["Software Engineer","Frontend Developer","Backend Developer","Full Stack Developer","DevOps Engineer","Data Scientist","Product Manager","UX Designer","UI Designer","Marketing Manager","Sales Representative","Business Analyst","Project Manager"].filter(t=>t.toLowerCase().includes(e.toLowerCase())).map((e,t)=>({id:"common-".concat(t),title:e,category:"Technology"}));_(a)}})(e)},300)},oe=e=>{A(e),G(!0),te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{(async e=>{if(e.length<2)Y([]);else try{const t=await(0,n.getApiUrl)(),a=await fetch("".concat(t,"/jobs/skills/search?q=").concat(encodeURIComponent(e)));if(!a.ok)throw new Error("API not available");const r=await a.json();Y(r.slice(0,10))}catch(h){console.error("Skills search error:",h);const a=["JavaScript","React","Node.js","Python","TypeScript","HTML","CSS","Java","C++","SQL","Git","Docker","AWS","MongoDB","PostgreSQL","Vue.js","Angular","Django","Flask","Spring","Laravel","Ruby on Rails","Go","Rust","Kotlin","Swift","React Native","Flutter","TensorFlow"].filter(t=>t.toLowerCase().includes(e.toLowerCase())).map((e,t)=>({id:"common-".concat(t),name:e}));Y(a)}})(e)},300)},ie=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=ae.findIndex(t=>t.value===e),a=ae.slice(0,t+1).map(e=>e.value);R(a)}else F.includes(e)?R(F.filter(t=>t!==e)):R([...F,e])};return(0,c.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-gray-900 dark:to-gray-800 py-8 px-4",children:(0,c.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:[(0,c.jsxs)("div",{className:"text-center mb-8",children:[(0,c.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,c.jsx)(i.rA,{className:"w-10 h-10 text-white"})}),(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Complete Your Profile"}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Tell us about yourself to get personalized job recommendations"})]}),h&&(0,c.jsx)("div",{className:"mb-6 p-4 bg-red-100 border border-red-200 rounded-lg text-red-700",children:h}),x&&(0,c.jsx)("div",{className:"mb-6 p-4 bg-green-100 border border-green-200 rounded-lg text-green-700",children:x}),(0,c.jsxs)("div",{className:"space-y-8",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.sD,{className:"w-4 h-4 inline mr-2"}),"Location"]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)("input",{type:"text",value:y,onChange:e=>re(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter your location or use GPS"}),(0,c.jsx)("button",{type:"button",onClick:async()=>{navigator.geolocation?(N(!0),navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:a}=e.coords;try{const e=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(t,"&lon=").concat(a,"&addressdetails=1")),s=await e.json();var r;if(s&&s.display_name)p(s.display_name),j({place_id:(null===(r=s.place_id)||void 0===r?void 0:r.toString())||"",display_name:s.display_name,lat:t.toString(),lon:a.toString()})}catch(h){console.error("Reverse geocoding error:",h),u("Failed to get location details")}finally{N(!1)}},e=>{console.error("Geolocation error:",e),u("Failed to get your location. Please check location permissions."),N(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})):u("Geolocation is not supported by this browser.")},disabled:k,"aria-label":"Use GPS",className:"px-4 py-2 bg-orange-500 text-white rounded-r-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:k?(0,c.jsx)("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}):(0,c.jsx)(i.qz,{className:"w-4 h-4"})})]}),f.length>0&&(0,c.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:f.map(e=>(0,c.jsx)("button",{onClick:()=>{j(e),p(e.display_name),w([])},className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm",children:e.display_name},e.place_id))})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.ZH,{className:"w-4 h-4 inline mr-2"}),"Current/Desired Job Titles (multiple selection allowed)"]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{type:"text",value:S,onChange:e=>se(e.target.value),onFocus:()=>T(!0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Search and select job titles"}),L&&P.length>0&&(0,c.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:P.map(e=>(0,c.jsxs)("button",{onClick:()=>(e=>{J.find(t=>t.id===e.id||t.title.toLowerCase()===e.title.toLowerCase())||(I([...J,e]),C(""),_([]),T(!1))})(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm",children:[(0,c.jsx)("div",{className:"font-medium",children:e.title}),(0,c.jsx)("div",{className:"text-xs text-gray-500",children:e.category})]},e.id))})]}),J.length>0&&(0,c.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:J.map(e=>(0,c.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full text-sm",children:[e.title,(0,c.jsx)("button",{onClick:()=>{return t=e.id,void I(J.filter(e=>e.id!==t));var t},className:"ml-2 text-orange-600 hover:text-orange-800",children:(0,c.jsx)(i.X,{className:"w-3 h-3"})})]},e.id))})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.FE,{className:"w-4 h-4 inline mr-2"}),"Experience Level"]}),(0,c.jsx)("div",{className:"space-y-2",children:ae.map(e=>(0,c.jsxs)("div",{className:"flex items-center group",children:[(0,c.jsx)("input",{type:"checkbox",id:e.value,checked:F.includes(e.value),onChange:t=>ie(e.value),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)("label",{htmlFor:e.value,className:"ml-3 text-sm text-gray-700 dark:text-gray-300 cursor-pointer flex-1",children:e.label}),(0,c.jsxs)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,c.jsx)("input",{type:"checkbox",id:"".concat(e.value,"-below"),checked:!1,onChange:()=>ie(e.value,!0),className:"h-3 w-3 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)("label",{htmlFor:"".concat(e.value,"-below"),className:"ml-1 text-xs text-gray-500 cursor-pointer",children:"and below"})]})]},e.value))})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.wB,{className:"w-4 h-4 inline mr-2"}),"Skills (max 30, searchable)"]}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("input",{type:"text",value:E,onChange:e=>oe(e.target.value),onFocus:()=>G(!0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Search and add skills"}),U&&D.length>0&&(0,c.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:D.map(e=>(0,c.jsx)("button",{onClick:()=>(e=>{$.length>=30?u("Maximum 30 skills allowed"):$.find(t=>t.id===e.id||t.name.toLowerCase()===e.name.toLowerCase())||(M([...$,e]),A(""),Y([]),G(!1),u(""))})(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 text-sm",children:e.name},e.id))})]}),$.length>0&&(0,c.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:$.map(e=>(0,c.jsxs)("span",{className:"inline-flex items-center px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:[e.name,(0,c.jsx)("button",{onClick:()=>{return t=e.id,void M($.filter(e=>e.id!==t));var t},className:"ml-2 text-blue-600 hover:text-blue-800",children:(0,c.jsx)(i.X,{className:"w-3 h-3"})})]},e.id))}),$.length>0&&(0,c.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[$.length,"/30 skills selected"]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.G9,{className:"w-4 h-4 inline mr-2"}),"Salary Range"]}),(0,c.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["$0 - $30k","$30k - $70k","$70k - $120k","$120k - $180k","$180k - $240k","$240k+"].map(e=>(0,c.jsxs)("label",{className:"flex items-center cursor-pointer p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("input",{type:"checkbox",checked:q.includes(e),onChange:()=>(e=>{q.includes(e)?z(q.filter(t=>t!==e)):z([...q,e])})(e),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:e})]},e))})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,c.jsx)(i.zD,{className:"w-4 h-4 inline mr-2"}),"Work Type"]}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Remote Jobs","Hybrid Jobs","Office Jobs"].map(e=>(0,c.jsxs)("label",{className:"flex items-center cursor-pointer p-4 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("input",{type:"checkbox",checked:O.includes(e),onChange:()=>(e=>{O.includes(e)?B(O.filter(t=>t!==e)):B([...O,e])})(e),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:e})]},e))}),(0,c.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"Remote Jobs is selected by default. You can select multiple options."})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:[(0,c.jsx)(i.Ir,{className:"w-4 h-4 inline mr-2"}),"Notification Preferences"]}),(0,c.jsxs)("div",{className:"space-y-3",children:[(0,c.jsxs)("label",{className:"flex items-center cursor-pointer p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("input",{type:"checkbox",checked:H,onChange:e=>X(e.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)(i.gE,{className:"w-4 h-4 ml-3 mr-2 text-gray-500"}),(0,c.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Email notifications for new jobs"})]}),(0,c.jsxs)("label",{className:"flex items-center cursor-pointer p-3 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("input",{type:"checkbox",checked:Q,onChange:e=>(async e=>{e&&"granted"!==Z?await l.requestPermission()?(K("granted"),W(!0)):(K("denied"),W(!1)):W(e)})(e.target.checked),className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),(0,c.jsx)(i.Ir,{className:"w-4 h-4 ml-3 mr-2 text-gray-500"}),(0,c.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Send notifications for new jobs"})]})]})]})]}),(0,c.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-600",children:(0,c.jsx)("button",{onClick:async()=>{if(0!==J.length)if(0!==F.length)if(0!==$.length)if(0!==q.length)if(0!==O.length){g(!0),u("");try{const t={location:(null===v||void 0===v?void 0:v.display_name)||y,job_titles:J.map(e=>e.title),experience_levels:F,skills:$.map(e=>e.name),salary_ranges:q,work_types:O,email_notifications:H,browser_notifications:Q};localStorage.setItem("userPreferences",JSON.stringify(t));const s=await(0,n.getApiUrl)();if(!(await fetch("".concat(s,"/onboarding/complete-profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify((0,r.A)({user_id:a},t))})).ok)throw new Error("Failed to save profile");b("Profile completed successfully!"),Q&&l.startPeriodicJobCheck(30),setTimeout(()=>{e("/jobs/search",{state:{searchParams:{job_title:J.map(e=>e.title).join(","),location:(null===v||void 0===v?void 0:v.display_name)||y,experience_level:F.join(","),work_type:O.join(","),salary_range:q.join(",")}}})},2e3)}catch(h){u(h.message||"Failed to complete profile")}finally{g(!1)}}else u("Please select at least one work type");else u("Please select at least one salary range");else u("Please add at least one skill");else u("Please select at least one experience level");else u("Please select at least one job title")},disabled:m,className:"w-full bg-gradient-to-r from-orange-500 to-yellow-500 text-white py-4 px-6 rounded-lg font-medium text-lg hover:from-orange-600 hover:to-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?(0,c.jsxs)("div",{className:"flex items-center justify-center",children:[(0,c.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Completing Profile..."]}):"Complete Profile & Find Jobs"})})]})})})}}}]);
//# sourceMappingURL=83.d545d31a.chunk.js.map